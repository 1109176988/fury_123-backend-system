import{d as b,r as d,a as V,u as U,b as E,o as R,c as B,e as o,w as t,f as C,g as u,h as I,i as F,k as S,j as p,l as z,p as K,m as G,_ as J}from"./index-93963865.js";import{E as L,a as N,b as q}from"./el-form-item-481af741.js";import{E as j}from"./el-button-d209cb55.js";import{_ as D}from"./logo-af716bbd.js";import{a as c}from"./index-2e8019e1.js";import"./typescript-2a5059be.js";import"./plugin-vue_export-helper-1cff8a04.js";const y=n=>(K("data-v-ae8a7448"),n=n(),G(),n),H={id:"login"},O=y(()=>p("div",{class:"center"},[p("img",{src:D,alt:"",width:"50",height:"50"})],-1)),M=y(()=>p("br",null,null,-1)),P=["src"],Q=b({__name:"UserLogin",setup(n){const m=d(),e=V({username:"",password:"",captcha:"",session_key:""}),x=U(),_=d(!1),f=d("iVBORw0KGgoAAAANSUhEUgAAAAwAAAAFCAIAAAD+GJp4AAAAGUlEQVR4nGJ5//49AyHARFAF/RUBAgAA//8HKgLavlPODwAAAABJRU5ErkJggg=="),g=d(!0),k=E(),h=()=>{console.log("点击了验证码"),c.captcha.do({},g).then(l=>{e.session_key=l.session_key,f.value=l.base64_image})};h();const A=()=>{var l;(l=m.value)==null||l.validate(s=>{if(!s)return!1;c.login.do(e,_).then(a=>{k.setAuth({token:a.token,user:a.username,super:a.is_super,actions:a.actions,menus:a.menus}),x.push("/")}).catch(c.errorMsg)})};return(l,s)=>{const a=N,i=q,w=j,v=L;return R(),B("div",H,[o(v,{class:"login-form",ref_key:"formRef",ref:m,model:e,onKeyup:C(A,["enter"]),size:"large"},{default:t(()=>[O,M,o(i,{prop:"username",rules:[{required:!0,message:"请输入你的用户名"}]},{default:t(()=>[o(a,{placeholder:"用户名","prefix-icon":u(I),size:"large",maxlength:32,modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=r=>e.username=r)},null,8,["prefix-icon","modelValue"])]),_:1}),o(i,{prop:"password",rules:[{required:!0,message:"请输入你的用户密码"}]},{default:t(()=>[o(a,{placeholder:"密码","prefix-icon":u(F),size:"large",type:"password",maxlength:32,autocomplete:"new-password","show-password":"",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=r=>e.password=r)},null,8,["prefix-icon","modelValue"])]),_:1}),o(i,{prop:"captcha",rules:[{required:!0,message:"请你输入验证码"}]},{default:t(()=>[o(a,{placeholder:"验证码","prefix-icon":u(S),size:"large",modelValue:e.captcha,"onUpdate:modelValue":s[2]||(s[2]=r=>e.captcha=r),disabled:!e.session_key,maxlength:4},{append:t(()=>[o(w,{style:{padding:"0",height:"var(--el-button-size)"},onClick:h,disabled:g.value},{default:t(()=>[p("img",{src:"data:image/jpg;base64,"+f.value,alt:"点击获取",title:"点击获取",style:{height:"38px"}},null,8,P)]),_:1},8,["disabled"])]),_:1},8,["prefix-icon","modelValue","disabled"])]),_:1}),o(i,null,{default:t(()=>[o(w,{type:"primary",loading:_.value,class:"full-width",onClick:A},{default:t(()=>[z("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","onKeyup"])])}}});const oe=J(Q,[["__scopeId","data-v-ae8a7448"]]);export{oe as default};
