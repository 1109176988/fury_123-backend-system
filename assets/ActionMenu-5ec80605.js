import{q as de,ak as me,al as V,d as te,T as pe,s as fe,r as P,a as re,I as M,N as be,v as _e,am as ve,o as N,c as G,a1 as X,g as n,y as Q,f as Y,e as s,w as d,B as x,S as Ne,an as ye,W as ee,ao as Ve,ap as ge,X as j,aq as q,a0 as he,F as we,ar as Ee,l as Z,as as Ie,j as Se,D as ke,Y as xe,at as Ce}from"./index-93963865.js";import{v as Fe}from"./el-loading-cb9f2d60.js";import{E as Ae,a as Pe,b as Te}from"./el-table-column-c008e49f.js";import{C as se,I as H,U as D,a as ue,b as Be,E as Me}from"./el-form-item-481af741.js";import{E as De,a as Ue,b as ze}from"./el-tree-dd49933d.js";import"./el-tooltip-4ed993c7.js";import"./el-scrollbar-fb5f2d99.js";/* empty css               */import{g as Ke,c as Oe,j as $e,a as le,E as Le}from"./el-button-d209cb55.js";import{a as k,E as Re}from"./index-2e8019e1.js";import{i as U,t as We,d as ae}from"./typescript-2a5059be.js";import{_ as Ye}from"./plugin-vue_export-helper-1cff8a04.js";import{v as oe}from"./index-9bb59a68.js";import"./vnode-40e000bf.js";import"./index-f3293e7a.js";import"./index-b8882b24.js";const je=de({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:me,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||V(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),qe={[se]:(r,h)=>h!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[H]:r=>V(r)||U(r),[D]:r=>V(r)||U(r)},Ge=["aria-label","onKeydown"],He=["aria-label","onKeydown"],Xe=te({name:"ElInputNumber"}),Je=te({...Xe,props:je,emits:qe,setup(r,{expose:h,emit:p}){const a=r,{t:C}=pe(),v=fe("input-number"),f=P(),o=re({currentValue:a.modelValue,userInput:null}),{formItem:u}=Ke(),z=M(()=>V(a.modelValue)&&a.modelValue<=a.min),K=M(()=>V(a.modelValue)&&a.modelValue>=a.max),m=M(()=>{const e=O(a.step);return q(a.precision)?Math.max(O(a.modelValue),e):(e>a.precision,a.precision)}),b=M(()=>a.controls&&a.controlsPosition==="right"),I=Oe(),S=$e(),F=M(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(U(e))return"";if(V(e)){if(Number.isNaN(e))return"";q(a.precision)||(e=e.toFixed(a.precision))}return e}),w=(e,t)=>{if(q(t)&&(t=m.value),t===0)return Math.round(e);let l=String(e);const i=l.indexOf(".");if(i===-1||!l.replace(".","").split("")[i+t])return e;const R=l.length;return l.charAt(R-1)==="5"&&(l=`${l.slice(0,Math.max(0,R-1))}6`),Number.parseFloat(Number(l).toFixed(t))},O=e=>{if(U(e))return 0;const t=e.toString(),l=t.indexOf(".");let i=0;return l!==-1&&(i=t.length-l-1),i},$=(e,t=1)=>V(e)?w(e+a.step*t):o.currentValue,E=()=>{if(a.readonly||S.value||K.value)return;const e=Number(F.value)||0,t=$(e);A(t),p(H,o.currentValue)},T=()=>{if(a.readonly||S.value||z.value)return;const e=Number(F.value)||0,t=$(e,-1);A(t),p(H,o.currentValue)},B=(e,t)=>{const{max:l,min:i,step:c,precision:g,stepStrictly:R,valueOnClear:W}=a;l<i&&We("InputNumber","min should not be greater than max.");let _=Number(e);if(U(e)||Number.isNaN(_))return null;if(e===""){if(W===null)return null;_=he(W)?{min:i,max:l}[W]:W}return R&&(_=w(Math.round(_/c)*c,g)),q(g)||(_=w(_,g)),(_>l||_<i)&&(_=_>l?l:i,t&&p(D,_)),_},A=(e,t=!0)=>{var l;const i=o.currentValue,c=B(e);if(!t){p(D,c);return}i!==c&&(o.userInput=null,p(D,c),p(se,c,i),a.validateEvent&&((l=u==null?void 0:u.validate)==null||l.call(u,"change").catch(g=>ae())),o.currentValue=c)},J=e=>{o.userInput=e;const t=e===""?null:Number(e);p(H,t),A(t,!1)},L=e=>{const t=e!==""?Number(e):"";(V(t)&&!Number.isNaN(t)||e==="")&&A(t),o.userInput=null},y=()=>{var e,t;(t=(e=f.value)==null?void 0:e.focus)==null||t.call(e)},ne=()=>{var e,t;(t=(e=f.value)==null?void 0:e.blur)==null||t.call(e)},ie=e=>{p("focus",e)},ce=e=>{var t;p("blur",e),a.validateEvent&&((t=u==null?void 0:u.validate)==null||t.call(u,"blur").catch(l=>ae()))};return be(()=>a.modelValue,e=>{const t=B(o.userInput),l=B(e,!0);!V(t)&&(!t||t!==l)&&(o.currentValue=l,o.userInput=null)},{immediate:!0}),_e(()=>{var e;const{min:t,max:l,modelValue:i}=a,c=(e=f.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(t)?c.setAttribute("aria-valuemin",String(t)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),c.setAttribute("aria-disabled",String(S.value)),!V(i)&&i!=null){let g=Number(i);Number.isNaN(g)&&(g=null),p(D,g)}}),ve(()=>{var e,t;const l=(e=f.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${(t=o.currentValue)!=null?t:""}`)}),h({focus:y,blur:ne}),(e,t)=>(N(),G("div",{class:Q([n(v).b(),n(v).m(n(I)),n(v).is("disabled",n(S)),n(v).is("without-controls",!e.controls),n(v).is("controls-right",n(b))]),onDragstart:t[1]||(t[1]=j(()=>{},["prevent"]))},[e.controls?X((N(),G("span",{key:0,role:"button","aria-label":n(C)("el.inputNumber.decrease"),class:Q([n(v).e("decrease"),n(v).is("disabled",n(z))]),onKeydown:Y(T,["enter"])},[s(n(le),null,{default:d(()=>[n(b)?(N(),x(n(Ne),{key:0})):(N(),x(n(ye),{key:1}))]),_:1})],42,Ge)),[[n(oe),T]]):ee("v-if",!0),e.controls?X((N(),G("span",{key:1,role:"button","aria-label":n(C)("el.inputNumber.increase"),class:Q([n(v).e("increase"),n(v).is("disabled",n(K))]),onKeydown:Y(E,["enter"])},[s(n(le),null,{default:d(()=>[n(b)?(N(),x(n(Ve),{key:0})):(N(),x(n(ge),{key:1}))]),_:1})],42,He)),[[n(oe),E]]):ee("v-if",!0),s(n(ue),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":n(F),placeholder:e.placeholder,readonly:e.readonly,disabled:n(S),size:n(I),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:t[0]||(t[0]=j(()=>{},["prevent"])),onKeydown:[Y(j(E,["prevent"]),["up"]),Y(j(T,["prevent"]),["down"])],onBlur:ce,onFocus:ie,onInput:J,onChange:L},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Qe=Ye(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ze=we(Qe);const _t=te({__name:"ActionMenu",setup(r){const h=P(!1),p=P([]),a=P(!1),C=P([]),v=()=>{k.sysMenuSync.do({menus:Ce},a).then(m=>{console.log(m,"res"),C.value=m.actions,p.value=m.menus,Re.success("同步成功")}).catch(k.errorMsg)};let f={id:0,key_name:"",title:"",sort:0};const o=P(!1),u=re({id:0,title:"",sort:0});function z(m){console.log(m,"item"),console.log(f,"row"),f=m,console.log(f,"row?"),console.log(u,"formState"),u.id=m.id,u.title=m.title,u.sort=m.sort,console.log(u,"formState"),o.value=!0}function K(){k.sysActionUpdate.do(u,h).then(()=>{f.title=u.title,f.sort=u.sort,o.value=!1}).catch(k.errorMsg)}return k.sysMenuList.do({},h).then(m=>{C.value=m.actions,p.value=m.menus}).catch(k.errorPage),(m,b)=>{const I=Le,S=De,F=Ue,w=Ae,O=Pe,$=ze,E=Be,T=ue,B=Ze,A=Me,J=Te,L=Fe;return N(),G(xe,null,[X((N(),x($,null,{default:d(()=>[s(F,{span:8},{default:d(()=>[s(I,{type:"primary",style:{"margin-bottom":"16px"},icon:n(Ee),onClick:v},{default:d(()=>[Z("全量同步")]),_:1},8,["icon"]),s(S,{data:p.value,"node-key":"name","empty-text":"",props:{label:"title",children:"sub"},"default-expand-all":""},null,8,["data"])]),_:1}),s(F,{span:16},{default:d(()=>[s(O,{data:C.value,"row-key":"id","tree-props":{children:"sub"},border:""},{default:d(()=>[s(w,{prop:"key_name",label:"接口路径",sortable:""}),s(w,{prop:"title",label:"名称备注"}),s(w,{prop:"sort",label:"排序",sortable:"",width:80}),n(k).sysActionUpdate.permit()?(N(),x(w,{key:0,label:"操作",width:60},{default:d(({row:y})=>[s(I,{type:"primary",icon:n(Ie),circle:"",size:"small",plain:"",onClick:ne=>z(y)},null,8,["icon","onClick"])]),_:1})):ee("",!0)]),_:1},8,["data"])]),_:1})]),_:1})),[[L,h.value]]),s(J,{modelValue:o.value,"onUpdate:modelValue":b[3]||(b[3]=y=>o.value=y)},{default:d(()=>[X((N(),x(A,{model:u,"label-width":"88px"},{default:d(()=>[s(E,{label:"接口路径"},{default:d(()=>[Se("span",null,ke(n(f).key_name),1)]),_:1}),s(E,{label:"名称备注"},{default:d(()=>[s(T,{modelValue:u.title,"onUpdate:modelValue":b[0]||(b[0]=y=>u.title=y),maxlength:17},null,8,["modelValue"])]),_:1}),s(E,{label:"排序"},{default:d(()=>[s(B,{modelValue:u.sort,"onUpdate:modelValue":b[1]||(b[1]=y=>u.sort=y),min:0,max:8888,precision:0,"controls-position":"right"},null,8,["modelValue"])]),_:1}),s(E,null,{default:d(()=>[s(I,{type:"primary",onClick:K},{default:d(()=>[Z("确定")]),_:1}),s(I,{onClick:b[2]||(b[2]=y=>o.value=!1)},{default:d(()=>[Z("取消")]),_:1})]),_:1})]),_:1},8,["model"])),[[L,h.value]])]),_:1},8,["modelValue"])],64)}}});export{_t as default};
