import{d as g,r as c,a as v,a1 as k,o as x,B as E,w as r,e as s,l as u}from"./index-e2bf60b4.js";import{v as V}from"./el-loading-1a5f9ff1.js";import{a as y,b as F,E as C}from"./el-form-item-b5ac5a16.js";import{E as b}from"./el-button-ac666232.js";import{a as f,E as B}from"./index-f34aa124.js";import"./typescript-f3187430.js";import"./plugin-vue_export-helper-1cff8a04.js";const q=g({__name:"ChangePwd",setup(I){const w={password:[{validator:(a,e,t)=>{var l;e===""?t("Please input the password!"):e.length<6?t("Please input at least 6 chars!"):(o.checkPwd!==""&&((l=d.value)==null||l.validateField("checkPwd")),t())},trigger:"blur"}],checkPwd:[{validator:(a,e,t)=>{e===""?t("Please input the password again!"):e!==o.password?t("Two inputs don't match!"):t()},trigger:"blur"}]},d=c(),o=v({password:"",checkPwd:""}),i=c(!1),p=()=>{var a;(a=d.value)==null||a.resetFields()},_=()=>{var a;(a=d.value)==null||a.validate(e=>{if(!e)return!1;f.changePwd.do({password:o.password},i).then(()=>{B.success("修改成功！"),p()}).catch(f.errorMsg)})};return(a,e)=>{const t=y,l=F,m=b,h=C,P=V;return k((x(),E(h,{ref_key:"formRef",ref:d,model:o,rules:w,"status-icon":"","label-width":"120px",style:{width:"500px"}},{default:r(()=>[s(l,{label:"新密码",prop:"password"},{default:r(()=>[s(t,{modelValue:o.password,"onUpdate:modelValue":e[0]||(e[0]=n=>o.password=n),type:"password",maxlength:32,autocomplete:"new-password"},null,8,["modelValue"])]),_:1}),s(l,{label:"确认密码",prop:"checkPwd"},{default:r(()=>[s(t,{modelValue:o.checkPwd,"onUpdate:modelValue":e[1]||(e[1]=n=>o.checkPwd=n),type:"password",maxlength:32,autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(l,null,{default:r(()=>[s(m,{type:"primary",onClick:_},{default:r(()=>[u("确定")]),_:1}),s(m,{onClick:p},{default:r(()=>[u("取消")]),_:1})]),_:1})]),_:1},8,["model"])),[[P,i.value]])}}});export{q as default};
